{"ast":null,"code":"import _regeneratorRuntime from\"/Users/Jamie/Desktop/test_session/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/Jamie/Desktop/test_session/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/Jamie/Desktop/test_session/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import{useEffect,useState}from\"react\";import\"./App.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),pic=_useState2[0],setPic=_useState2[1];var _useState3=useState(\"no session data\"),_useState4=_slicedToArray(_useState3,2),sessionData=_useState4[0],setSessionData=_useState4[1];var _useState5=useState(\"no session\"),_useState6=_slicedToArray(_useState5,2),sessionSourceId=_useState6[0],setSessionSourceId=_useState6[1];//Used to check status.\nvar _useState7=useState(\"No Status\"),_useState8=_slicedToArray(_useState7,2),sessionStatus=_useState8[0],setSessionStatus=_useState8[1];var _useState9=useState(\"No session URL\"),_useState10=_slicedToArray(_useState9,2),sessionPresignedUrl=_useState10[0],setSessionPresignedUrl=_useState10[1];//Long amazon url\nvar _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),heldFormData=_useState12[0],setHeldFormData=_useState12[1];useEffect(function(){},[sessionData,heldFormData]);//IMGIX EXAMPLES: STARTING SESSION\nvar imgixHandleSubmitForSessionStarting=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var formData,test;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();formData=new FormData();formData.append(\"pic\",pic);_context.next=5;return axios.post(\"http://localhost:5001/startImgixSession\",formData).then(console.log(\"starting imgix session\")).catch(function(error){return console.log(error.message);});case 5:test=_context.sent;setSessionSourceId(test.data.allData.data.attributes.id);//Stores session Source id\nsetSessionStatus(test.data.allData.data.attributes.status);setSessionPresignedUrl(test.data.allData.data.attributes.url);setHeldFormData(test.data.theBufferReturned.data);case 10:case\"end\":return _context.stop();}}},_callee);}));return function imgixHandleSubmitForSessionStarting(_x){return _ref.apply(this,arguments);};}();var imgixHandleChangeForSessionStarting=function imgixHandleChangeForSessionStarting(e){setPic(e.target.files[0]);};//IMGIX EXAMPLE: PUT REQUEST WITH PRESIGNED SESSION URL\nvar sendFormDataPostRequest=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){var formDataPostRequest,test;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();formDataPostRequest=new FormData();formDataPostRequest.append(\"pic\",pic);formDataPostRequest.append(\"awsURL\",sessionPresignedUrl);//Starting session\n_context2.next=6;return axios.post(\"http://localhost:5001/postSession\",formDataPostRequest).then(console.log(\"\")).catch(function(error){return console.log(error.message);});case 6:test=_context2.sent;case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function sendFormDataPostRequest(_x2){return _ref2.apply(this,arguments);};}();//IMGIX EXAMPLE: CHECK SESSION STATUS\nvar imgixHandleCheckStatus=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(e){var value,sessionStatusForAxios;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:e.preventDefault();value={grabbedSessionSourceID:sessionSourceId};//check session\n_context3.next=4;return axios.post(\"http://localhost:5001/checkImgixSessionStatus\",value).then(console.log(\"Check imgix session\")).catch(function(error){return console.log(error.message);});case 4:sessionStatusForAxios=_context3.sent;setSessionStatus(\"Checked: \"+sessionStatusForAxios.data.data.attributes.status);case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function imgixHandleCheckStatus(_x3){return _ref3.apply(this,arguments);};}();//IMGIX EXAMPLE: CLOSE SESSION\nvar imgixHandleCloseSession=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(e){var valueData,sessionStatusForAxios;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:e.preventDefault();valueData={grabbedSessionSourceID:sessionSourceId};//close session\n_context4.next=4;return axios.post(\"http://localhost:5001/checkImgixCloseSession\",valueData).then(console.log(\"Client - CLOSE imgix session\")).catch(function(error){return console.log(error.message);});case 4:sessionStatusForAxios=_context4.sent;setSessionStatus(\"Checked: \"+sessionStatusForAxios.data.data.attributes.status);case 6:case\"end\":return _context4.stop();}}},_callee4);}));return function imgixHandleCloseSession(_x4){return _ref4.apply(this,arguments);};}();//See formData\nvar seeFormData=function seeFormData(){console.log(JSON.stringify(heldFormData));};return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsxs(\"form\",{className:\"form\",onSubmit:imgixHandleSubmitForSessionStarting,children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:imgixHandleChangeForSessionStarting}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{children:\"Starting a session\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:sendFormDataPostRequest,children:\"Sending formData to Post Request\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:imgixHandleCheckStatus,children:\"Check session status\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:imgixHandleCloseSession,children:\"Close Session\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:seeFormData,children:\"See form data in Console log\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"The sessionSourceId is: \",sessionSourceId]}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"The sessionStatus is: \",sessionStatus]}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"The sessionPresignedUrl is: \",sessionPresignedUrl]})]});}export default App;/*\nSteps to follow:\n1) Start session\n2) upload with Presigned URL\n3) Close session\n4) Check status.\n*/","map":{"version":3,"names":["axios","useEffect","useState","App","pic","setPic","sessionData","setSessionData","sessionSourceId","setSessionSourceId","sessionStatus","setSessionStatus","sessionPresignedUrl","setSessionPresignedUrl","heldFormData","setHeldFormData","imgixHandleSubmitForSessionStarting","e","preventDefault","formData","FormData","append","post","then","console","log","catch","error","message","test","data","allData","attributes","id","status","url","theBufferReturned","imgixHandleChangeForSessionStarting","target","files","sendFormDataPostRequest","formDataPostRequest","imgixHandleCheckStatus","value","grabbedSessionSourceID","sessionStatusForAxios","imgixHandleCloseSession","valueData","seeFormData","JSON","stringify"],"sources":["/Users/Jamie/Desktop/test_session/client/src/App.js"],"sourcesContent":["import axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport \"./App.css\";\n\nfunction App() {\n  const [pic, setPic] = useState();\n  const [sessionData, setSessionData] = useState(\"no session data\");\n  const [sessionSourceId, setSessionSourceId] = useState(\"no session\"); //Used to check status.\n  const [sessionStatus, setSessionStatus] = useState(\"No Status\");\n  const [sessionPresignedUrl, setSessionPresignedUrl] =\n    useState(\"No session URL\"); //Long amazon url\n  const [heldFormData, setHeldFormData] = useState(\"\");\n  useEffect(() => {}, [sessionData, heldFormData]);\n\n  //IMGIX EXAMPLES: STARTING SESSION\n  const imgixHandleSubmitForSessionStarting = async (e) => {\n    e.preventDefault();\n    const formData = new FormData();\n    formData.append(\"pic\", pic);\n\n    const test = await axios\n      .post(\"http://localhost:5001/startImgixSession\", formData)\n      .then(console.log(\"starting imgix session\"))\n      .catch((error) => console.log(error.message));\n\n    setSessionSourceId(test.data.allData.data.attributes.id); //Stores session Source id\n    setSessionStatus(test.data.allData.data.attributes.status);\n    setSessionPresignedUrl(test.data.allData.data.attributes.url);\n    setHeldFormData(test.data.theBufferReturned.data);\n  };\n  const imgixHandleChangeForSessionStarting = (e) => {\n    setPic(e.target.files[0]);\n  };\n\n  //IMGIX EXAMPLE: PUT REQUEST WITH PRESIGNED SESSION URL\n  const sendFormDataPostRequest = async (e) => {\n    e.preventDefault();\n    const formDataPostRequest = new FormData();\n    formDataPostRequest.append(\"pic\", pic);\n    formDataPostRequest.append(\"awsURL\", sessionPresignedUrl);\n\n    //Starting session\n    const test = await axios\n      .post(\"http://localhost:5001/postSession\", formDataPostRequest)\n      .then(console.log(\"\"))\n      .catch((error) => console.log(error.message));\n  };\n\n  //IMGIX EXAMPLE: CHECK SESSION STATUS\n  const imgixHandleCheckStatus = async (e) => {\n    e.preventDefault();\n    const value = { grabbedSessionSourceID: sessionSourceId };\n\n    //check session\n    const sessionStatusForAxios = await axios\n      .post(\"http://localhost:5001/checkImgixSessionStatus\", value)\n      .then(console.log(\"Check imgix session\"))\n      .catch((error) => console.log(error.message));\n\n    setSessionStatus(\n      \"Checked: \" + sessionStatusForAxios.data.data.attributes.status\n    );\n  };\n\n  //IMGIX EXAMPLE: CLOSE SESSION\n  const imgixHandleCloseSession = async (e) => {\n    e.preventDefault();\n    const valueData = { grabbedSessionSourceID: sessionSourceId };\n\n    //close session\n    const sessionStatusForAxios = await axios\n      .post(\"http://localhost:5001/checkImgixCloseSession\", valueData)\n      .then(console.log(\"Client - CLOSE imgix session\"))\n      .catch((error) => console.log(error.message));\n\n    setSessionStatus(\n      \"Checked: \" + sessionStatusForAxios.data.data.attributes.status\n    );\n  };\n\n  //See formData\n  const seeFormData = () => {\n    console.log(JSON.stringify(heldFormData));\n  };\n\n  return (\n    <div className='app'>\n      <form className='form' onSubmit={imgixHandleSubmitForSessionStarting}>\n        <input type='file' onChange={imgixHandleChangeForSessionStarting} />\n        <br />\n        <button>Starting a session</button>\n        <br />\n        <button onClick={sendFormDataPostRequest}>\n          Sending formData to Post Request\n        </button>\n      </form>\n      <button onClick={imgixHandleCheckStatus}>Check session status</button>\n      <br />\n      <button onClick={imgixHandleCloseSession}>Close Session</button>\n      <br />\n      <button onClick={seeFormData}>See form data in Console log</button>\n      <br />\n\n      <h3>The sessionSourceId is: {sessionSourceId}</h3>\n      <h3>The sessionStatus is: {sessionStatus}</h3>\n      <h3>The sessionPresignedUrl is: {sessionPresignedUrl}</h3>\n      {/* <h3>minetype is: {storedMimetype}</h3> */}\n    </div>\n  );\n}\n\nexport default App;\n\n/*\nSteps to follow:\n1) Start session\n2) upload with Presigned URL\n3) Close session\n4) Check status.\n*/\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}